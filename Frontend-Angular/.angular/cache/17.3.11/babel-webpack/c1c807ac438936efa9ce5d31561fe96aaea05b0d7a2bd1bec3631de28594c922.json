{"ast":null,"code":"import { ApiService } from 'src/app/Service/api.service';\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Service/api.service\";\nimport * as i2 from \"@angular/router\";\nfunction AdminComponent_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function AdminComponent_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.show());\n    });\n    i0.ɵɵtext(1, \"Click to Add\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminComponent_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function AdminComponent_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.hide());\n    });\n    i0.ɵɵtext(1, \"Click to hide\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminComponent_form_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 14, 0);\n    i0.ɵɵlistener(\"ngSubmit\", function AdminComponent_form_6_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const f_r5 = i0.ɵɵreference(1);\n      const prodname_r6 = i0.ɵɵreference(6);\n      const desc_r7 = i0.ɵɵreference(9);\n      const quan_r8 = i0.ɵɵreference(12);\n      const price_r9 = i0.ɵɵreference(15);\n      const image_r10 = i0.ɵɵreference(18);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(f_r5.form.valid && ctx_r1.addProd(desc_r7, quan_r8, price_r9, prodname_r6, image_r10));\n    });\n    i0.ɵɵelementStart(2, \"div\", 8)(3, \"div\", 15)(4, \"div\", 16);\n    i0.ɵɵelement(5, \"input\", 17, 1);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 16);\n    i0.ɵɵelement(8, \"textarea\", 18, 2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 16);\n    i0.ɵɵelement(11, \"input\", 19, 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 16);\n    i0.ɵɵelement(14, \"input\", 20, 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 16)(17, \"input\", 21, 5);\n    i0.ɵɵlistener(\"change\", function AdminComponent_form_6_Template_input_change_17_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.handleFileInput($event.target.files));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"div\", 15)(20, \"h4\", 22);\n    i0.ɵɵtext(21, \"Image preview\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(22, \"img\", 23);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 8)(24, \"div\", 15);\n    i0.ɵɵelement(25, \"input\", 24);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(22);\n    i0.ɵɵproperty(\"src\", ctx_r1.imageUrl, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction AdminComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"div\", 26)(2, \"div\", 27)(3, \"h5\", 28);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"img\", 29);\n    i0.ɵɵelementStart(6, \"p\", 30);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"input\", 31, 6);\n    i0.ɵɵelementStart(10, \"div\", 8)(11, \"div\", 15)(12, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function AdminComponent_div_9_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const prdid_r12 = i0.ɵɵreference(9);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.edit(prdid_r12));\n    });\n    i0.ɵɵtext(13, \"Edit\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 15)(15, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function AdminComponent_div_9_Template_button_click_15_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const prdid_r12 = i0.ɵɵreference(9);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.delProd(prdid_r12));\n    });\n    i0.ɵɵtext(16, \"Remove\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const product_r13 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(product_r13.productname);\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate1(\"src\", \"data:image/png;base64,\", product_r13.productimage, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", product_r13.description, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"value\", product_r13.productid);\n  }\n}\nexport let AdminComponent = /*#__PURE__*/(() => {\n  class AdminComponent {\n    constructor(api, router) {\n      this.api = api;\n      this.router = router;\n      this.products = [];\n      this.fileToUpload = null;\n      this.showAdd = false;\n      this.imageUrl = \"/assets/img/noimage.png\";\n    }\n    ngOnInit() {\n      if (this.api.isAuthenticated) {\n        this.auth = this.api.getToken();\n        this.api.getProducts().subscribe(res => {\n          this.products = res.oblist;\n        });\n      }\n    }\n    handleFileInput(file) {\n      this.fileToUpload = file.item(0);\n      var reader = new FileReader();\n      reader.onload = event => {\n        this.imageUrl = event.target.result;\n      };\n      reader.readAsDataURL(this.fileToUpload);\n    }\n    show() {\n      this.showAdd = true;\n    }\n    hide() {\n      this.showAdd = false;\n    }\n    addProd(desc, quan, price, prodname, image) {\n      this.api.addProduct(desc.value, quan.value, price.value, prodname.value, this.fileToUpload).subscribe(res => {\n        this.products = res.oblist;\n      });\n    }\n    delProd(prodid) {\n      this.api.deleteProduct(prodid.value).subscribe(res => {\n        this.products = res.oblist;\n        this.ngOnInit();\n      });\n    }\n    edit(prodid) {\n      let navigationExtras = {\n        queryParams: {\n          \"user\": prodid.value\n        }\n      };\n      this.router.navigate([\"admin/edit\"], navigationExtras);\n    }\n    static {\n      this.ɵfac = function AdminComponent_Factory(t) {\n        return new (t || AdminComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AdminComponent,\n        selectors: [[\"app-admin\"]],\n        decls: 10,\n        vars: 4,\n        consts: [[\"f\", \"ngForm\"], [\"prodname\", \"\"], [\"desc\", \"\"], [\"quan\", \"\"], [\"price\", \"\"], [\"image\", \"\"], [\"prdid\", \"\"], [1, \"container\"], [1, \"row\"], [1, \"col-12\"], [\"class\", \"mybtn btn btn-secondary\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"form-horizontal shadow p-3 mb-5 bg-white rounded \", 3, \"ngSubmit\", 4, \"ngIf\"], [\"class\", \"col-3 align-left\", 4, \"ngFor\", \"ngForOf\"], [1, \"mybtn\", \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"form-horizontal\", \"shadow\", \"p-3\", \"mb-5\", \"bg-white\", \"rounded\", 3, \"ngSubmit\"], [1, \"col-6\"], [1, \"form-group\"], [\"type\", \"text\", \"placeholder\", \"Product Name\", \"ngModel\", \"\", \"name\", \"prodname\", 1, \"form-control\"], [\"type\", \"text\", \"placeholder\", \"description\", \"name\", \"desc\", \"ngModel\", \"\", \"rows\", \"5\", 1, \"form-control\"], [\"type\", \"text\", \"placeholder\", \"quantity\", \"name\", \"quan\", \"ngModel\", \"\", 1, \"form-control\"], [\"type\", \"text\", \"placeholder\", \"price\", \"name\", \"price\", \"ngModel\", \"\", 1, \"form-control\"], [\"type\", \"file\", \"placeholder\", \"Product Picture\", \"accept\", \"image/*\", \"name\", \"image\", 1, \"form-control\", 3, \"change\"], [1, \"text-center\"], [2, \"width\", \"400px\", \"height\", \"300px\", 3, \"src\"], [\"type\", \"submit\", \"value\", \"Add Product\", 1, \"btn\", \"btn-primary\"], [1, \"col-3\", \"align-left\"], [1, \"card\", \"shadow\", \"p-3\", \"mb-5\", \"bg-white\", \"rounded\"], [1, \"card-body\"], [1, \"card-title\"], [\"height\", \"150px\", \"width\", \"200px\", \"alt\", \"Image\", 1, \"img-responsive\", 3, \"src\"], [1, \"card-text\"], [\"type\", \"hidden\", 3, \"value\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n        template: function AdminComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelement(0, \"app-navigation\");\n            i0.ɵɵelementStart(1, \"div\", 7)(2, \"div\", 8)(3, \"div\", 9);\n            i0.ɵɵtemplate(4, AdminComponent_button_4_Template, 2, 0, \"button\", 10)(5, AdminComponent_button_5_Template, 2, 0, \"button\", 10);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(6, AdminComponent_form_6_Template, 26, 1, \"form\", 11);\n            i0.ɵɵelement(7, \"hr\");\n            i0.ɵɵelementStart(8, \"div\", 8);\n            i0.ɵɵtemplate(9, AdminComponent_div_9_Template, 17, 5, \"div\", 12);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", !ctx.showAdd);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.showAdd);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.showAdd);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngForOf\", ctx.products);\n          }\n        },\n        styles: [\".card-text[_ngcontent-%COMP%]{height:50px;overflow:hidden}.mybtn[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:15px}.mybtnclr[_ngcontent-%COMP%]{margin-left:10px}\"]\n      });\n    }\n  }\n  return AdminComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}