{"ast":null,"code":"import { ActivatedRoute } from '@angular/router';\nimport { ApiService } from 'src/app/Service/api.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/Service/api.service\";\nexport let EditItemComponent = /*#__PURE__*/(() => {\n  class EditItemComponent {\n    constructor(route, api) {\n      this.route = route;\n      this.api = api;\n      this.product = {\n        productid: 0,\n        description: '',\n        price: 0,\n        productname: '',\n        quantity: 0,\n        productimage: null\n      };\n      this.products = [];\n      this.fileToUpload = null;\n      this.imageUrl = \"/assets/img/noimage.png\";\n      if (this.api.isAuthenticated) {\n        this.auth = this.api.getToken();\n        this.api.getProducts().subscribe(res => {\n          res.oblist.forEach(pro => {\n            if (pro.productid == this.prodid) {\n              this.product = pro;\n              this.fileToUpload = pro.productimage;\n            }\n          });\n        });\n      }\n    }\n    ngOnInit() {\n      this.route.queryParams.subscribe(params => {\n        this.prodid = params[\"user\"];\n      });\n    }\n    handleFileInput(file) {\n      this.fileToUpload = file.item(0);\n      var reader = new FileReader();\n      reader.onload = event => {\n        this.imageUrl = event.target.result;\n      };\n      reader.readAsDataURL(this.fileToUpload);\n    }\n    updateProd(desc, quan, price, prodname, image) {\n      console.log(this.product.productid);\n      this.api.updateProduct(desc.value, quan.value, price.value, prodname.value, this.fileToUpload, this.product.productid).subscribe(res => {\n        console.log(res);\n      });\n    }\n    static {\n      this.ɵfac = function EditItemComponent_Factory(t) {\n        return new (t || EditItemComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ApiService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: EditItemComponent,\n        selectors: [[\"app-edit-item\"]],\n        decls: 35,\n        vars: 7,\n        consts: [[\"f\", \"ngForm\"], [\"prodname\", \"\"], [\"desc\", \"\"], [\"quan\", \"\"], [\"price\", \"\"], [\"image\", \"\"], [1, \"container\"], [1, \"form-horizontal\", \"shadow\", \"p-3\", \"mb-5\", \"bg-white\", \"rounded\", 3, \"ngSubmit\"], [1, \"row\"], [1, \"col-6\"], [1, \"form-group\"], [\"type\", \"text\", \"placeholder\", \"Product Name\", \"ngModel\", \"\", \"name\", \"prodname\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"placeholder\", \"description\", \"name\", \"desc\", \"ngModel\", \"\", \"rows\", \"5\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"placeholder\", \"quantity\", \"name\", \"quan\", \"ngModel\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"placeholder\", \"price\", \"name\", \"price\", \"ngModel\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"file\", \"placeholder\", \"Product Picture\", \"accept\", \"image/*\", \"name\", \"image\", 1, \"form-control\", 3, \"change\"], [1, \"col-3\"], [2, \"width\", \"70%\", \"height\", \"60%\", 3, \"src\"], [2, \"width\", \"250px\", \"height\", \"200px\", 3, \"src\"], [\"type\", \"submit\", \"value\", \"Update Product\", 1, \"btn\", \"btn-secondary\"]],\n        template: function EditItemComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelement(0, \"app-navigation\");\n            i0.ɵɵelementStart(1, \"div\", 6);\n            i0.ɵɵelement(2, \"br\");\n            i0.ɵɵelementStart(3, \"form\", 7, 0);\n            i0.ɵɵlistener(\"ngSubmit\", function EditItemComponent_Template_form_ngSubmit_3_listener() {\n              i0.ɵɵrestoreView(_r1);\n              const f_r2 = i0.ɵɵreference(4);\n              const prodname_r3 = i0.ɵɵreference(9);\n              const desc_r4 = i0.ɵɵreference(12);\n              const quan_r5 = i0.ɵɵreference(15);\n              const price_r6 = i0.ɵɵreference(18);\n              const image_r7 = i0.ɵɵreference(21);\n              return i0.ɵɵresetView(f_r2.form.valid && ctx.updateProd(desc_r4, quan_r5, price_r6, prodname_r3, image_r7));\n            });\n            i0.ɵɵelementStart(5, \"div\", 8)(6, \"div\", 9)(7, \"div\", 10)(8, \"input\", 11, 1);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function EditItemComponent_Template_input_ngModelChange_8_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.product.productname, $event) || (ctx.product.productname = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(10, \"div\", 10)(11, \"textarea\", 12, 2);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function EditItemComponent_Template_textarea_ngModelChange_11_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.product.description, $event) || (ctx.product.description = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(13, \"div\", 10)(14, \"input\", 13, 3);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function EditItemComponent_Template_input_ngModelChange_14_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.product.quantity, $event) || (ctx.product.quantity = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(16, \"div\", 10)(17, \"input\", 14, 4);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function EditItemComponent_Template_input_ngModelChange_17_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.product.price, $event) || (ctx.product.price = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(19, \"div\", 10)(20, \"input\", 15, 5);\n            i0.ɵɵlistener(\"change\", function EditItemComponent_Template_input_change_20_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.handleFileInput($event.target.files));\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(22, \"div\", 16)(23, \"p\")(24, \"b\");\n            i0.ɵɵtext(25, \"Original Image\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(26, \"img\", 17);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"div\", 16)(28, \"p\")(29, \"b\");\n            i0.ɵɵtext(30, \"New Image\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(31, \"img\", 18);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(32, \"div\", 8)(33, \"div\", 9);\n            i0.ɵɵelement(34, \"input\", 19);\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(8);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.product.productname);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.product.description);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.product.quantity);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.product.price);\n            i0.ɵɵadvance(9);\n            i0.ɵɵpropertyInterpolate1(\"src\", \"data:image/png;base64,\", ctx.product.productimage, \"\", i0.ɵɵsanitizeUrl);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"src\", ctx.imageUrl, i0.ɵɵsanitizeUrl);\n          }\n        }\n      });\n    }\n  }\n  return EditItemComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}